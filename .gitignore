const axios = require("axios");
const path = require("path");
const fs = require("fs-extra");
const { getPrefix } = global.utils;
const { commands, aliases } = global.GoatBot;
const doNotDelete = null;

module.exports = {
  config: {
    name: "help",
    version: "1.0",
    author: "NTKhang | Rehat86",
    countDown: 5,
    role: 0,
    category: "info",
    guide: {
      en: "{pn} [empty or <command name>]"
    },
    priority: 1
  },

  langs: {
    en: {
      help: `â•”â•â•â•â•â•â•â•â•â•â•â•â•—
    ğ—¡ğ—¶ğ˜€ğ—µğ—¶ğ—ºğ—¶ğ˜†ğ—® ğ—”ğ—œ ğ—–ğ—µğ—®ğ˜ğ—¯ğ—¼ğ˜
â•šâ•â•â•â•â•â•â•â•â•â•â•â•

â•­â”€â”€â”€ã€  ğ—¢ğ—ªğ—¡ğ—˜ğ—¥  ã€
 âœ§adminonly âœ§approved âœ§backupdata
 âœ§bin âœ§bio âœ§bot âœ§spam
 âœ§cmd âœ§code âœ§delete cmd
 âœ§devonly âœ§edit âœ§edit3
 âœ§edit4 âœ§edit5 âœ§edit6
 âœ§edit8 âœ§editx âœ§event
 âœ§file âœ§getfbstate âœ§hubble
 âœ§ignoreonlyad âœ§ignoreonlyadbox âœ§jsontomongodb
 âœ§jsontosqlite âœ§listbox âœ§loadconfig
 âœ§notice âœ§notification âœ§owner
 âœ§owner2 âœ§respect âœ§setavt
 âœ§setlang âœ§setrankup âœ§thread
 âœ§up âœ§update âœ§upt
 âœ§upt2 âœ§upt3 âœ§user
 âœ§vex âœ§vip âœ§w
 âœ§w4 âœ§resetprefix âœ§setalias
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—”ğ——ğ— ğ—œğ—¡  ã€
 âœ§block âœ§leave âœ§main âœ§automaticaccept
 âœ§usage âœ§out âœ§ping âœ§addfile âœ§autoget âœ§chekjson
 âœ§testgpt âœ§delete âœ§stats âœ§admin list âœ§testhtml
 âœ§uptime âœ§uptime2 âœ§autoseen âœ§clean âœ§eval âœ§join
 âœ§shell âœ§goatbotcommandcreate âœ§undefined âœ§example âœ§goatmart âœ§restart
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—œğ— ğ—”ğ—šğ—˜  ã€
 âœ§affect âœ§arrest âœ§avatar
 âœ§banner âœ§batslap âœ§blink
 âœ§cdp3 âœ§cdp4 âœ§chad
 âœ§coupledp âœ§cover âœ§cover2
 âœ§ephoto âœ§giphy âœ§horror
 âœ§imgsearch âœ§imgur âœ§link
 âœ§mpanel âœ§pin âœ§pr
 âœ§profile âœ§prompt âœ§sorthelp
 âœ§spy âœ§template âœ§trigger
 âœ§ws
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—§ğ—¢ğ—¢ğ—Ÿ'ğ—¦  ã€
 âœ§fakechat âœ§exerciseinfo âœ§guide âœ§memberlist âœ§qrcode âœ§wish
 âœ§namaj âœ§ocr âœ§owners âœ§clonevoice âœ§xgojo âœ§zombie
 âœ§ownerx âœ§prefix âœ§qr âœ§nn âœ§fbaccount âœ§system
 âœ§rembg âœ§home âœ§support âœ§muptime âœ§weather âœ§emojimean
 âœ§post âœ§apimarket âœ§device âœ§theme âœ§tag âœ§font âœ§countryinfo
 âœ§botstats âœ§calc âœ§deldatabase âœ§bday âœ§fbcover
 âœ§pet âœ§testjs âœ§antiout âœ§ip âœ§appstore âœ§devicetop
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—™ğ—¨ğ—¡  ã€
 âœ§ball âœ§beauty âœ§biden âœ§cat
 âœ§choose âœ§card âœ§choose âœ§clown âœ§coffee 
 âœ§dog âœ§drip âœ§duck âœ§egif âœ§elon âœ§emojimix
 âœ§emojistory âœ§fact1 âœ§flip âœ§flirt
 âœ§hack âœ§impress âœ§inbox âœ§joke2 âœ§love âœ§lyricscard âœ§mark âœ§married 
 âœ§mlbbstalk âœ§mpn âœ§myfact âœ§myquote
 âœ§myquote2  âœ§nokia âœ§notify âœ§obama âœ§pair4 âœ§pickuplines 
 âœ§propose âœ§quote âœ§quotes âœ§randomcatname  âœ§rip
 âœ§rizz âœ§sad âœ§spiderman âœ§anya âœ§kiss2 âœ§meme
 âœ§taylorquote âœ§tes  âœ§train âœ§ugly âœ§unforgivable 
 âœ§wifey âœ§wishcard âœ§bored âœ§content
 âœ§genshin âœ§hell âœ§joke 
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—šğ—”ğ— ğ—˜  ã€
 âœ§aniquiz âœ§arkn âœ§candycrush
 âœ§daily âœ§dhbc âœ§dice âœ§tof
 âœ§dicedash âœ§frogjump âœ§guessactor
 âœ§guessnumber âœ§memorygame âœ§penalty
 âœ§pixart âœ§playcard âœ§pubgguess
 âœ§riddle âœ§sdxl âœ§sicbo âœ§fight âœ§quiz âœ§quizx
 âœ§tictactoe âœ§tod âœ§ttt âœ§coinflip
 âœ§tttv2 âœ§tttvx âœ§uncrossable âœ§wordguess
 âœ§waifudex âœ§worker âœ§xcup âœ§slot âœ§truthordare
 âœ§country âœ§slot âœ§fish âœ§spellingbee
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—•ğ—¢ğ—«-ğ—–ğ—›ğ—”ğ—§ ã€
 âœ§adduser âœ§admin âœ§ads
 âœ§all âœ§antichangeinfobox âœ§autosetname
 âœ§badwords âœ§ban âœ§busy
 âœ§count âœ§filteruser âœ§gay
 âœ§kick âœ§membercount âœ§menu
 âœ§nncheck âœ§onlyadminbox âœ§refresh
 âœ§rules âœ§sendnoti âœ§setname
 âœ§unsend âœ§warn âœ§spamban âœ§spygc
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—¨ğ—§ğ—œğ—Ÿğ—œğ—§ğ—¬  ã€
 âœ§age âœ§album âœ§amvquote
 âœ§bibleverse âœ§calculate âœ§cmdstore
 âœ§connectgc âœ§image âœ§imgbb
 âœ§inf âœ§ipshow âœ§math
 âœ§monitor âœ§note âœ§sendwebhook âœ§translate
 âœ§upscaleai âœ§v2a âœ§view
 âœ§word âœ§smg âœ§ss âœ§ss2
 âœ§glen âœ§measure âœ§tempmail âœ§tg 
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—™ğ—¨ğ—¡-ğŸ® ã€
 âœ§berojgar âœ§cai âœ§dance âœ§fun
 âœ§findgay âœ§fun2 âœ§mistake 
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—¨ğ—§ğ—œğ—Ÿğ—œğ—§ğ—¬-ğŸ®  ã€
 âœ§accept âœ§avatar1 âœ§bc
 âœ§beshy âœ§bintotext âœ§calendar
 âœ§cricket âœ§evenbin âœ§gmage
 âœ§google-search âœ§pastebin âœ§reminder
 âœ§requestmain âœ§short
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—œğ—¡ğ—™ğ—¢  ã€
 âœ§cbin âœ§define âœ§fbstalk
 âœ§history âœ§info âœ§stalk
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—™ğ—¢ğ—¢ğ—§ğ—•ğ—”ğ—Ÿğ—Ÿ  ã€
 âœ§messi âœ§neymar âœ§ramos
 âœ§ronaldo
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ——ğ—˜ğ—©ğ—˜ğ—Ÿğ—¢ğ—£ğ—˜ğ—¥  ã€
 âœ§scrape âœ§whitelist âœ§whitelistthread
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ— ğ—˜ğ— ğ—˜  ã€
 âœ§sciencememe âœ§smeme âœ§buttslap
 âœ§cry âœ§gname
 âœ§programmingmeme âœ§trash âœ§wanted
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—§ğ—§ğ—¦  ã€
 âœ§say  âœ§t2s  âœ§voice âœ§memevoice
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—¦ğ—§ğ—¨ğ——ğ—¬  ã€
 âœ§advice âœ§dictionary âœ§itunes
 âœ§wiki âœ§fact âœ§motivation âœ§motivation2
â•°â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—šğ—¥ğ—¢ğ—¨ğ—£  ã€
 âœ§spamkick âœ§top âœ§topxp
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—”ğ—¡ğ—œğ— ğ—˜ ã€
 âœ§anigif âœ§animeinfo âœ§animequotes âœ§aniwatch
 âœ§animetrend âœ§anitrace âœ§anivoice âœ§one-piece
 âœ§bleach âœ§jjk âœ§manga âœ§anime âœ§xenoz âœ§animirror
 âœ§mangadex âœ§quote2 âœ§waifux âœ§art âœ§animegirl
 âœ§naruinfo âœ§opinfo âœ§bleachinfo  âœ§anistatus
 âœ§alienrizz âœ§aniblur âœ§aniedit  
 âœ§animetime âœ§anivid âœ§twixtor âœ§anipic
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€ ğ—¡ğ—¢ğ—¡ğ—˜ ğ—£ğ—¥ğ—˜ğ—™ğ—œğ—«  ã€
 âœ§ara âœ§beluga âœ§fuck you
 âœ§gojoo âœ§groove âœ§hi âœ§sheesh
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—˜ğ—–ğ—¢ğ—¡ğ—¢ğ— ğ—¬  ã€
 âœ§balance âœ§money âœ§quest âœ§coin
 âœ§richest âœ§setâœ§bank âœ§currequest 
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—§ğ—˜ğ—«ğ—§ğ—£ğ—¥ğ—¢  ã€
  âœ§bigtxt âœ§botsay âœ§blood âœ§circuit
  âœ§khaby âœ§ronb âœ§willsmith âœ§quote3
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€ ğ—–ğ—¢ğ—¡ğ—§ğ—¥ğ—”ğ—–ğ—§ ğ—”ğ——ğ— ğ—œğ—¡ ã€
 âœ§callad  âœ§botgc 
 âœ§supportgc
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ— ğ—¨ğ—¦ğ—œğ—–  ã€
 âœ§animesong âœ§audio âœ§media
 âœ§sing âœ§spotify âœ§voicify
 âœ§youtubex âœ§axix 
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—Ÿğ—¢ğ—šğ—¢  ã€
 âœ§cardinfo âœ§cardinfo2 
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ— ğ—˜ğ——ğ—œğ—” ã€
 âœ§autolink âœ§chords âœ§convert âœ§getlink2
 âœ§github âœ§igdl âœ§lv  âœ§voice
 âœ§lyrics âœ§singx âœ§tik 
 âœ§videofb âœ§anya2 âœ§insta
 âœ§collab âœ§tiktok âœ§pmvd âœ§pubgedit âœ§ffedit
 âœ§overlay âœ§youtube âœ§ytb
 âœ§alldl âœ§fb âœ§getlink âœ§insta2
 âœ§moviedl âœ§pixels âœ§song âœ§video
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€ ğ—Ÿğ—¢ğ—©ğ—˜ ã€
 âœ§cdp âœ§kiss âœ§pair2 
 âœ§pair3 âœ§ship âœ§us âœ§cdp2
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—¦ğ—¢ğ—–ğ—œğ—”ğ—Ÿ  ã€
 âœ§fbpost âœ§fbreport âœ§fbshare
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—”ğ—œ ğ—–ğ—›ğ—”ğ—§ ã€
 âœ§ask âœ§clips âœ§gemini âœ§geminiv2 âœ§gen
 âœ§gllama âœ§gojo âœ§gpt âœ§hina âœ§liner âœ§mistral
 âœ§nemo âœ§roast âœ§snoop âœ§summarize
 âœ§zoro âœ§teach âœ§beast âœ§gpt4 âœ§bby 
 âœ§hinu âœ§yamato âœ§hello  âœ§smsg
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€ ğ—šğ—™ğ—« ã€
 âœ§gfx âœ§gfx2 âœ§gfx3
 âœ§gfx4 âœ§gfx5 âœ§gfx6
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€ ğ—”ğ—œ-ğ—šğ—˜ğ—¡ğ—˜ğ—¥ğ—”ğ—§ğ—˜ğ—— ã€
 âœ§prompt2 âœ§imagejourney âœ§dallex
 âœ§imaginex âœ§imagine âœ§genx
 âœ§niji âœ§nijiz  
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€ ğ—£ğ—¢ğ—ğ—˜ğ— ğ—¢ğ—¡ ã€
 âœ§pokebot âœ§pokeinfo 
 âœ§pokechamps âœ§pokedex âœ§poketrade
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€ ğ—–ğ—¨ğ—¦ğ—§ğ—¢ğ—  ã€
 âœ§setleave âœ§setwelcome âœ§shortcut
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—ªğ—”ğ—œğ—™ğ—¨ ğ—šğ—”ğ— ğ—˜ ã€
 âœ§waifulist âœ§waifutop
 âœ§waifuinfo âœ§waifutrade 
 âœ§waifuinv âœ§waifupull 
 âœ§waifusellall âœ§waifusell
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•­â”€â”€â”€ã€  ğ—¥ğ—”ğ—¡ğ—  ã€
 âœ§customrankcard âœ§rank âœ§ranktop
 âœ§rankup âœ§ranking
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—Š

â•”â•â•â•â•â•â•â•â•â•â•â•â•—
â‡¨ Total Cmds: [ 545 ]
â‡¨ Type [ / help <cmd name> ]
to learn the usage
â•šâ•â•â•â•â•â•â•â•â•â•â•â•
 ğ“ƒ˜ | ğ—¡ğ—¶ğ˜€ğ—µğ—¶ğ—ºğ—¶ğ˜†ğ—®`,
      commandNotFound: "Command \"%1\" does not exist",
      getInfoCommand: "Â» Description: %2\nÂ» Other names: %3\nÂ» Other names in your group: %4\nÂ» Version: %5\nÂ» Role: %6\nÂ» Time per command: %7s\nÂ» Author: %8\nâ”â”â”  â–  â”â”â”\nÂ» Usage guide:\n%9\nâ”â”â”  â–  â”â”â”\nÂ» Notes:\nâ€¢ The content inside <XXXXX> can be changed\nâ€¢ The content inside [a|b|c] is a or b or c",
      onlyInfo: "â”â”â”  â–  â”â”â”\nâ”‚ Command name: %1\nâ”‚ Description: %2\nâ”‚ Other names: %3\nâ”‚ Other names in your group: %4\nâ”‚ Version: %5\nâ”‚ Role: %6\nâ”‚ Time per command: %7s\nâ”‚ Author: %8\nâ–â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–",
      onlyUsage: "â–â”€â”€ USAGE â”€â”€â”€â”€â–\nâ”‚%1\nâ–â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–",
      onlyAlias: "â–â”€â”€ ALIAS â”€â”€â”€â”€â–\nâ”‚ Other names: %1\nâ”‚ Other names in your group: %2\nâ–â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–",
      onlyRole: "â–â”€â”€ ROLE â”€â”€â”€â”€â–\nâ”‚%1\nâ–â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–",
      doNotHave: "Do not have",
      roleText0: "0 (All users)",
      roleText1: "1 (Group administrators)",
      roleText2: "2 (Admin bot)",
      roleText0setRole: "0 (set role, all users)",
      roleText1setRole: "1 (set role, group administrators)",
      pageNotFound: "Page %1 does not exist"
    }
  },

  onStart: async function ({ message, args, event, threadsData, getLang, role, api, usersData}) {


    const langCode = await threadsData.get(event.threadID, "data.lang") || global.GoatBot.config.language;
    let customLang = {};
    const pathCustomLang = path.join(__dirname, "..", "..", "languages", "cmds", `${langCode}.js`);
    if (fs.existsSync(pathCustomLang))
      customLang = require(pathCustomLang);
    const { threadID } = event;
    const threadData = await threadsData.get(threadID);
    const prefix = getPrefix(threadID);
    let sortHelp = threadData.settings.sortHelp || "name";
    if (!["category", "name"].includes(sortHelp))
      sortHelp = "name";
    const commandName = (args[0] || "").toLowerCase();
    const command = commands.get(commandName) || commands.get(aliases.get(commandName));
    // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” LIST ALL COMMAND â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” //
    if (!command && !args[0] || !isNaN(args[0])) {
      const arrayInfo = [];
      let msg = "";
      if (sortHelp == "name") {
        const page = parseInt(args[0]) || 1;
        const numberOfOnePage = 30;
        for (const [name, value] of commands) {
          if (value.config.role > 1 && role < value.config.role)
            continue;
          let describe = name;
          let shortDescription;
          const shortDescriptionCustomLang = customLang[name]?.shortDescription;
          if (shortDescriptionCustomLang != undefined)
            shortDescription = checkLangObject(shortDescriptionCustomLang, langCode);
          else if (value.config.shortDescription)
            shortDescription = checkLangObject(value.config.shortDescription, langCode);
          if (shortDescription)
            describe += `: ${cropContent(shortDescription.charAt(0).toUpperCase() + shortDescription.slice(1))}`;
          arrayInfo.push({
            data: describe,
            priority: value.priority || 0
          });
        }
        arrayInfo.sort((a, b) => a.data - b.data);
        arrayInfo.sort((a, b) => a.priority > b.priority ? -1 : 1);
        const { allPage, totalPage } = global.utils.splitPage(arrayInfo, numberOfOnePage);
        if (page < 1 || page > totalPage)
          return message.reply(getLang("pageNotFound", page));
        const returnArray = allPage[page - 1] || [];
        const startNumber = (page - 1) * numberOfOnePage + 1;
        msg += (returnArray || []).reduce((text, item, index) => text += `â”‚ ${index + startNumber}${index + startNumber < 10 ? " " : ""}. ${item.data}\n`, '').slice(0, -1);
        await message.reply(getLang("help", msg, page, totalPage, commands.size, prefix, doNotDelete));
      };
    }
    // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” COMMAND DOES NOT EXIST â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” //
    else if (!command && args[0]) {
      return message.reply(getLang("commandNotFound", args[0]));
    }
    // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” INFO COMMAND â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” //
    else {
      const formSendMessage = {};
      const configCommand = command.config;

      let guide = configCommand.guide?.[langCode] || configCommand.guide?.["en"];
      if (guide == undefined)
        guide = customLang[configCommand.name]?.guide?.[langCode] || customLang[configCommand.name]?.guide?.["en"];

      guide = guide || {
        body: ""
      };
      if (typeof guide == "string")
        guide = { body: guide };
      const guideBody = guide.body
        .replace(/\{prefix\}|\{p\}/g, prefix)
        .replace(/\{name\}|\{n\}/g, configCommand.name)
        .replace(/\{pn\}/g, prefix + configCommand.name);

      const aliasesString = configCommand.aliases ? configCommand.aliases.join(", ") : getLang("doNotHave");
      const aliasesThisGroup = threadData.data.aliases ? (threadData.data.aliases[configCommand.name] || []).join(", ") : getLang("doNotHave");

      let roleOfCommand = configCommand.role;
      let roleIsSet = false;
      if (threadData.data.setRole?.[configCommand.name]) {
        roleOfCommand = threadData.data.setRole[configCommand.name];
        roleIsSet = true;
      }

      const roleText = roleOfCommand == 0 ?
        (roleIsSet ? getLang("roleText0setRole") : getLang("roleText0")) :
        roleOfCommand == 1 ?
          (roleIsSet ? getLang("roleText1setRole") : getLang("roleText1")) :
          getLang("roleText2");

      const author = configCommand.author;
      const descriptionCustomLang = customLang[configCommand.name]?.longDescription;
      let description = checkLangObject(configCommand.longDescription, langCode);
      if (description == undefined)
        if (descriptionCustomLang != undefined)
          description = checkLangObject(descriptionCustomLang, langCode);
        else
          description = getLang("doNotHave");

      let sendWithAttachment = false;

      if (args[1]?.match(/^-g|guide|-u|usage$/)) {
        formSendMessage.body = getLang("onlyUsage", guideBody.split("\n").join("\n"));
        sendWithAttachment = true;
      }
      else if (args[1]?.match(/^-a|alias|aliase|aliases$/))
        formSendMessage.body = getLang("onlyAlias", aliasesString, aliasesThisGroup);
      else if (args[1]?.match(/^-r|role$/))
        formSendMessage.body = getLang("onlyRole", roleText);
      else if (args[1]?.match(/^-i|info$/))
        formSendMessage.body = getLang("onlyInfo", configCommand.name, description, aliasesString, aliasesThisGroup, configCommand.version, roleText, configCommand.countDown || 1, author || "");
      else {
        formSendMessage.body = getLang("getInfoCommand", configCommand.name, description, aliasesString, aliasesThisGroup, configCommand.version, roleText, configCommand.countDown || 1, author || "", `${guideBody.split("\n").join("\n")}`);
        sendWithAttachment = true;
      }

      if (sendWithAttachment && guide.attachment) {
        if (typeof guide.attachment == "object") {
          formSendMessage.attachment = [];
          for (const pathFile in guide.attachment) {
            if (!fs.existsSync(pathFile)) {
              const cutFullPath = pathFile.split("/").filter(item => item != "");
              cutFullPath.pop();
              for (let i = 0; i < cutFullPath.length; i++) {
                const path = cutFullPath.slice(0, i + 1).join('/');
                if (!fs.existsSync(path))
                  fs.mkdirSync(path);
              }
              const getFile = await axios.get(guide.attachment[pathFile], { responseType: 'arraybuffer' });
              fs.writeFileSync(pathFile, Buffer.from(getFile.data));
            }
            formSendMessage.attachment.push(fs.createReadStream(pathFile));
          }
        }
      }
      return message.reply(formSendMessage);
    }
  }
};

function checkLangObject(data, langCode) {
  if (typeof data == "string")
    return data;
  if (typeof data == "object" && !Array.isArray(data))
    return data[langCode] || data.en || undefined;
  return undefined;
}

function cropContent(content, max) {
  if (content.length > max) {
    content = content.slice(0, max - 3);
    content = content + "...";
  }
  return content;
}
